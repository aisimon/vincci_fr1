<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Number Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0f172a;
            color: white;
            touch-action: manipulation;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .number-btn {
            aspect-ratio: 1 / 1;
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 900;
        }

        .number-btn:active {
            transform: scale(0.9);
        }

        .number-btn.correct {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.5);
        }

        .number-btn.wrong {
            animation: shake 0.4s ease-in-out;
            background-color: #ef4444 !important;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }

        .stats-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="app" class="w-full max-w-md">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-black bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400 mb-2">
                SPEED NUMBER
            </h1>
            <p class="text-slate-400">Press numbers 1 to 25 as fast as possible!</p>
        </div>

        <!-- Stats -->
        <div class="stats-card rounded-2xl p-6 mb-6 flex justify-between items-center">
            <div>
                <p class="text-xs uppercase tracking-widest text-slate-500 font-bold">Target</p>
                <p id="next-num" class="text-3xl font-black text-blue-400">1</p>
            </div>
            <div class="text-center">
                <p class="text-xs uppercase tracking-widest text-slate-500 font-bold">Time</p>
                <p id="timer" class="text-3xl font-mono font-bold text-white">0.00s</p>
            </div>
            <div class="text-right">
                <p class="text-xs uppercase tracking-widest text-slate-500 font-bold">Best</p>
                <p id="best-time" class="text-2xl font-bold text-emerald-400">--</p>
            </div>
        </div>

        <!-- Game Board Container -->
        <div class="relative">
            <div id="grid" class="number-grid bg-slate-800/50 p-3 rounded-2xl shadow-2xl border border-slate-700">
                <!-- Numbers injected here -->
            </div>

            <!-- Start/Overlay Screen -->
            <div id="overlay" class="absolute inset-0 z-10 flex flex-col items-center justify-center bg-slate-900/90 rounded-2xl backdrop-blur-sm transition-opacity duration-300">
                <h2 id="overlay-title" class="text-2xl font-bold mb-4">Ready?</h2>
                <button id="start-btn" class="px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg shadow-blue-900/40 transition-all hover:scale-105 active:scale-95">
                    START GAME
                </button>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="w-full bg-slate-800 h-2 rounded-full mt-8 overflow-hidden">
            <div id="progress" class="bg-gradient-to-r from-blue-500 to-emerald-500 h-full w-0 transition-all duration-300"></div>
        </div>
    </div>

    <script>
        // Game Configuration
        const MAX_NUM = 25;
        let nextTarget = 1;
        let startTime = null;
        let timerInterval = null;
        let bestTime = Infinity;
        let isGameRunning = false;

        // Audio System
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playTone(freq, type = 'sine', duration = 0.1, volume = 0.1) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();

            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            
            gain.gain.setValueAtTime(volume, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + duration);

            osc.connect(gain);
            gain.connect(audioCtx.destination);

            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        const sounds = {
            correct: (num) => playTone(300 + (num * 20), 'sine', 0.2, 0.15),
            wrong: () => playTone(150, 'sawtooth', 0.3, 0.1),
            start: () => {
                playTone(400, 'sine', 0.1);
                setTimeout(() => playTone(600, 'sine', 0.1), 100);
                setTimeout(() => playTone(800, 'sine', 0.2), 200);
            },
            win: () => {
                [600, 800, 1000, 1200].forEach((f, i) => {
                    setTimeout(() => playTone(f, 'square', 0.4, 0.05), i * 100);
                });
            }
        };

        // DOM Elements
        const gridEl = document.getElementById('grid');
        const nextNumEl = document.getElementById('next-num');
        const timerEl = document.getElementById('timer');
        const bestTimeEl = document.getElementById('best-time');
        const overlayEl = document.getElementById('overlay');
        const overlayTitleEl = document.getElementById('overlay-title');
        const startBtn = document.getElementById('start-btn');
        const progressEl = document.getElementById('progress');

        // Initialization
        function initGame() {
            const numbers = Array.from({ length: MAX_NUM }, (_, i) => i + 1);
            shuffle(numbers);

            gridEl.innerHTML = '';
            numbers.forEach(num => {
                const btn = document.createElement('button');
                btn.className = 'number-btn rounded-xl flex items-center justify-center text-2xl bg-slate-700 hover:bg-slate-600 text-white shadow-md';
                btn.textContent = num;
                
                // Color mapping
                const hue = (num * 137.5) % 360; // Golden angle for unique colors
                btn.style.borderColor = `hsl(${hue}, 70%, 50%)`;
                btn.style.borderWidth = '2px';
                
                btn.addEventListener('click', () => handleNumberClick(num, btn));
                gridEl.appendChild(btn);
            });
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function handleNumberClick(num, btnEl) {
            if (!isGameRunning) return;

            if (num === nextTarget) {
                // Correct
                sounds.correct(num);
                btnEl.classList.add('correct');
                nextTarget++;
                
                updateProgress();

                if (nextTarget > MAX_NUM) {
                    winGame();
                } else {
                    nextNumEl.textContent = nextTarget;
                }
            } else {
                // Wrong
                sounds.wrong();
                btnEl.classList.add('wrong');
                setTimeout(() => btnEl.classList.remove('wrong'), 400);
            }
        }

        function updateProgress() {
            const percent = ((nextTarget - 1) / MAX_NUM) * 100;
            progressEl.style.width = `${percent}%`;
        }

        function startTimer() {
            startTime = Date.now();
            timerInterval = setInterval(() => {
                const elapsed = (Date.now() - startTime) / 1000;
                timerEl.textContent = elapsed.toFixed(2) + 's';
            }, 10);
        }

        function startGame() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            isGameRunning = true;
            nextTarget = 1;
            nextNumEl.textContent = '1';
            overlayEl.style.opacity = '0';
            setTimeout(() => overlayEl.style.display = 'none', 300);
            
            initGame();
            updateProgress();
            sounds.start();
            startTimer();
        }

        function winGame() {
            isGameRunning = false;
            clearInterval(timerInterval);
            sounds.win();

            const finalTime = parseFloat(timerEl.textContent);
            if (finalTime < bestTime) {
                bestTime = finalTime;
                bestTimeEl.textContent = bestTime.toFixed(2) + 's';
            }

            overlayTitleEl.innerHTML = `<span class="text-emerald-400">Finish!</span><br><span class="text-white text-4xl">${finalTime.toFixed(2)}s</span>`;
            startBtn.textContent = 'PLAY AGAIN';
            overlayEl.style.display = 'flex';
            setTimeout(() => overlayEl.style.opacity = '1', 10);
        }

        startBtn.addEventListener('click', startGame);

        // First render
        initGame();
    </script>
</body>
</html>

